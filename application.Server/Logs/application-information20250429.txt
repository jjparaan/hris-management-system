2025-04-29 14:17:01.563 +08:00 [INF] Now listening on: https://localhost:7258
2025-04-29 14:17:01.574 +08:00 [INF] Now listening on: http://localhost:5039
2025-04-29 14:17:01.582 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-29 14:17:01.584 +08:00 [INF] Hosting environment: Development
2025-04-29 14:17:01.585 +08:00 [INF] Content root path: C:\Users\01PH1714.Jhuan.P\Desktop\Dev\hris-management-system\application.Server
2025-04-29 14:17:06.130 +08:00 [INF] No SPA development server running at https://localhost:51204 found.
2025-04-29 14:17:11.884 +08:00 [INF] SPA development server running at 'https://localhost:51204'
2025-04-29 14:18:20.107 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:51204/weatherforecast - null null
2025-04-29 14:18:20.194 +08:00 [INF] Executing endpoint 'application.Server.Controllers.WeatherForecastController.Get (application.Server)'
2025-04-29 14:18:20.215 +08:00 [INF] Route matched with {action = "Get", controller = "WeatherForecast"}. Executing controller action with signature System.Collections.Generic.IEnumerable`1[application.Server.WeatherForecast] Get() on controller application.Server.Controllers.WeatherForecastController (application.Server).
2025-04-29 14:18:20.413 +08:00 [INF] Executing ObjectResult, writing value of type 'application.Server.WeatherForecast[]'.
2025-04-29 14:18:20.473 +08:00 [INF] Executed action application.Server.Controllers.WeatherForecastController.Get (application.Server) in 241.2304ms
2025-04-29 14:18:20.478 +08:00 [INF] Executed endpoint 'application.Server.Controllers.WeatherForecastController.Get (application.Server)'
2025-04-29 14:18:20.499 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:51204/weatherforecast - 200 null application/json; charset=utf-8 399.9611ms
2025-04-29 14:18:20.514 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:51204/weatherforecast - null null
2025-04-29 14:18:20.527 +08:00 [INF] Executing endpoint 'application.Server.Controllers.WeatherForecastController.Get (application.Server)'
2025-04-29 14:18:20.528 +08:00 [INF] Route matched with {action = "Get", controller = "WeatherForecast"}. Executing controller action with signature System.Collections.Generic.IEnumerable`1[application.Server.WeatherForecast] Get() on controller application.Server.Controllers.WeatherForecastController (application.Server).
2025-04-29 14:18:20.554 +08:00 [INF] Executing ObjectResult, writing value of type 'application.Server.WeatherForecast[]'.
2025-04-29 14:18:20.556 +08:00 [INF] Executed action application.Server.Controllers.WeatherForecastController.Get (application.Server) in 19.4798ms
2025-04-29 14:18:20.558 +08:00 [INF] Executed endpoint 'application.Server.Controllers.WeatherForecastController.Get (application.Server)'
2025-04-29 14:18:20.559 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:51204/weatherforecast - 200 null application/json; charset=utf-8 45.3419ms
2025-04-29 14:35:11.240 +08:00 [INF] Executed DbCommand (176ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [HRISManagementSystemDB];
2025-04-29 14:35:11.345 +08:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HRISManagementSystemDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-04-29 14:35:11.363 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-29 14:35:11.412 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-04-29 14:35:11.414 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-29 14:35:11.425 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-29 14:35:11.443 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-29 14:35:12.449 +08:00 [INF] Applying migration '20250425165600_InitialMigration'.
2025-04-29 14:35:12.464 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250425165600_InitialMigration', N'8.0.15');
2025-04-29 14:35:12.468 +08:00 [INF] Applying migration '20250426095300_SetUpEntitiesAndTheirRelationships'.
2025-04-29 14:35:12.469 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250426095300_SetUpEntitiesAndTheirRelationships', N'8.0.15');
2025-04-29 14:35:12.470 +08:00 [INF] Applying migration '20250426105628_ReInitializeMigrationForEntitiesAndDbContext'.
2025-04-29 14:35:13.865 +08:00 [INF] Executed DbCommand (1,354ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Departments] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [LastModifiedOn] datetime2 NULL,
    [CreatedBy] nvarchar(max) NULL,
    [LastModifiedBy] nvarchar(max) NULL,
    CONSTRAINT [PK_Departments] PRIMARY KEY ([Id])
);
2025-04-29 14:35:13.866 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [JobTitles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [LastModifiedOn] datetime2 NULL,
    [CreatedBy] nvarchar(max) NULL,
    [LastModifiedBy] nvarchar(max) NULL,
    CONSTRAINT [PK_JobTitles] PRIMARY KEY ([Id])
);
2025-04-29 14:35:13.870 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Employees] (
    [Id] int NOT NULL IDENTITY,
    [EmployeeCode] nvarchar(max) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [MiddleName] nvarchar(max) NOT NULL,
    [ShortCode] nvarchar(max) NOT NULL,
    [DateOfBirth] datetime2 NOT NULL,
    [Gender] int NOT NULL,
    [Email] nvarchar(150) NOT NULL,
    [PhoneNumber] nvarchar(15) NOT NULL,
    [Address] nvarchar(max) NOT NULL,
    [DepartmentId] int NOT NULL,
    [JobTitleId] int NOT NULL,
    [HireDate] datetime2 NOT NULL,
    [Salary] decimal(18,2) NOT NULL,
    [EmploymentStatus] int NOT NULL,
    [ProfilePictureUrl] nvarchar(max) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [LastModifiedOn] datetime2 NULL,
    [CreatedBy] nvarchar(max) NULL,
    [LastModifiedBy] nvarchar(max) NULL,
    CONSTRAINT [PK_Employees] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Employees_Departments_DepartmentId] FOREIGN KEY ([DepartmentId]) REFERENCES [Departments] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Employees_JobTitles_JobTitleId] FOREIGN KEY ([JobTitleId]) REFERENCES [JobTitles] ([Id]) ON DELETE NO ACTION
);
2025-04-29 14:35:15.429 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AttendanceRecords] (
    [Id] int NOT NULL IDENTITY,
    [EmployeeId] int NOT NULL,
    [AttendanceDate] datetime2 NOT NULL,
    [CheckInTime] time NULL,
    [CheckOutTime] time NULL,
    [Status] int NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [LastModifiedOn] datetime2 NULL,
    [CreatedBy] nvarchar(max) NULL,
    [LastModifiedBy] nvarchar(max) NULL,
    CONSTRAINT [PK_AttendanceRecords] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AttendanceRecords_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [Employees] ([Id]) ON DELETE NO ACTION
);
2025-04-29 14:35:15.431 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [LeaveRequests] (
    [Id] int NOT NULL IDENTITY,
    [LeaveRequestId] int NOT NULL,
    [EmployeeId] int NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NOT NULL,
    [LeaveType] int NOT NULL,
    [Status] int NOT NULL,
    [Reason] nvarchar(1000) NOT NULL,
    [RequestDate] datetime2 NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [LastModifiedOn] datetime2 NULL,
    [CreatedBy] nvarchar(max) NULL,
    [LastModifiedBy] nvarchar(max) NULL,
    CONSTRAINT [PK_LeaveRequests] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_LeaveRequests_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [Employees] ([Id]) ON DELETE NO ACTION
);
2025-04-29 14:35:18.649 +08:00 [INF] Executed DbCommand (3,218ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payrolls] (
    [Id] int NOT NULL IDENTITY,
    [EmployeeId] int NOT NULL,
    [PayrollDate] datetime2 NOT NULL,
    [BasicSalary] decimal(18,2) NOT NULL,
    [Bonus] decimal(18,2) NOT NULL,
    [Deductions] decimal(18,2) NOT NULL,
    [NetSalary] decimal(18,2) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [LastModifiedOn] datetime2 NULL,
    [CreatedBy] nvarchar(max) NULL,
    [LastModifiedBy] nvarchar(max) NULL,
    CONSTRAINT [PK_Payrolls] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Payrolls_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [Employees] ([Id]) ON DELETE NO ACTION
);
2025-04-29 14:35:18.651 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserAccounts] (
    [Id] int NOT NULL IDENTITY,
    [EmployeeId] int NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [Role] int NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [LastModifiedOn] datetime2 NULL,
    [CreatedBy] nvarchar(max) NULL,
    [LastModifiedBy] nvarchar(max) NULL,
    CONSTRAINT [PK_UserAccounts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserAccounts_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [Employees] ([Id]) ON DELETE CASCADE
);
2025-04-29 14:35:18.653 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Logs] (
    [Id] int NOT NULL IDENTITY,
    [Timestamp] datetime2 NOT NULL,
    [Level] int NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [Exception] nvarchar(2000) NULL,
    [Logger] nvarchar(255) NULL,
    [UserAccountId] int NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    CONSTRAINT [PK_Logs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Logs_UserAccounts_UserAccountId] FOREIGN KEY ([UserAccountId]) REFERENCES [UserAccounts] ([Id]) ON DELETE NO ACTION
);
2025-04-29 14:35:21.214 +08:00 [INF] Executed DbCommand (2,561ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AttendanceRecords_EmployeeId] ON [AttendanceRecords] ([EmployeeId]);
2025-04-29 14:35:21.220 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Departments_Name] ON [Departments] ([Name]);
2025-04-29 14:35:21.257 +08:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Employees_DepartmentId] ON [Employees] ([DepartmentId]);
2025-04-29 14:35:21.261 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Employees_Email] ON [Employees] ([Email]);
2025-04-29 14:35:21.266 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Employees_JobTitleId] ON [Employees] ([JobTitleId]);
2025-04-29 14:35:21.273 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_JobTitles_Name] ON [JobTitles] ([Name]);
2025-04-29 14:35:21.276 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_LeaveRequests_EmployeeId] ON [LeaveRequests] ([EmployeeId]);
2025-04-29 14:35:21.280 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Logs_UserAccountId] ON [Logs] ([UserAccountId]);
2025-04-29 14:35:23.755 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payrolls_EmployeeId] ON [Payrolls] ([EmployeeId]);
2025-04-29 14:35:23.757 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserAccounts_EmployeeId] ON [UserAccounts] ([EmployeeId]);
2025-04-29 14:35:23.758 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_UserAccounts_Username] ON [UserAccounts] ([Username]);
2025-04-29 14:35:23.759 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250426105628_ReInitializeMigrationForEntitiesAndDbContext', N'8.0.15');
2025-04-29 14:35:23.760 +08:00 [INF] Applying migration '20250426110731_RemoveTimestampInLogAndUtilizeCreatedOnAndAddDefaultValueForCreatedOn'.
2025-04-29 14:35:23.896 +08:00 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Logs]') AND [c].[name] = N'Timestamp');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Logs] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Logs] DROP COLUMN [Timestamp];
2025-04-29 14:35:25.564 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250426110731_RemoveTimestampInLogAndUtilizeCreatedOnAndAddDefaultValueForCreatedOn', N'8.0.15');
2025-04-29 14:35:25.576 +08:00 [INF] Applying migration '20250426121245_RenameLogToApplicationLog'.
2025-04-29 14:35:25.595 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250426121245_RenameLogToApplicationLog', N'8.0.15');
2025-04-29 14:35:25.597 +08:00 [INF] Applying migration '20250426121819_RenameLogToApplicationLogInTheDBAsWell'.
2025-04-29 14:35:25.627 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Logs] DROP CONSTRAINT [FK_Logs_UserAccounts_UserAccountId];
2025-04-29 14:35:25.634 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Logs] DROP CONSTRAINT [PK_Logs];
2025-04-29 14:35:29.458 +08:00 [INF] Executed DbCommand (2,369ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Logs]', N'ApplicationLogs';
2025-04-29 14:35:29.469 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[ApplicationLogs].[IX_Logs_UserAccountId]', N'IX_ApplicationLogs_UserAccountId', N'INDEX';
2025-04-29 14:35:29.474 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ApplicationLogs] ADD CONSTRAINT [PK_ApplicationLogs] PRIMARY KEY ([Id]);
2025-04-29 14:35:29.476 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ApplicationLogs] ADD CONSTRAINT [FK_ApplicationLogs_UserAccounts_UserAccountId] FOREIGN KEY ([UserAccountId]) REFERENCES [UserAccounts] ([Id]) ON DELETE NO ACTION;
2025-04-29 14:35:29.483 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250426121819_RenameLogToApplicationLogInTheDBAsWell', N'8.0.15');
2025-04-29 14:35:29.484 +08:00 [INF] Applying migration '20250429063451_InitialMigrationToWorkDeviceLocalDb'.
2025-04-29 14:35:29.503 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250429063451_InitialMigrationToWorkDeviceLocalDb', N'8.0.15');
